<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script>
    // 1+2+...+n
    // let getSum = function(n) {
    //     if(n === 1) {
    //         return 1
    //     } else {
    //         return n + getSum(n-1)
    //     }
    // }
    // let getJi = function(n) {
    //     if(n === 1) {
    //         return 1;
    //     } else {
    //         return n * arguments.callee(n-1)
    //     }
    // }
    // 1! + 2! + ... + n!
    // 1 2 6 24
    // let getSumJi = function(n) {
    //     function getji(m) {
    //         if(m === 1) {
    //             return 1;
    //         } else {
    //             return m * arguments.callee(m-1)
    //         }
    //     }
    //     if(n === 1) {
    //         return getji(1)
    //     } else {
    //         return getji(n) + getSumJi(n-1)
    //     }
    // }
    // console.log(getSumJi(1))
    // console.log(getSumJi(2))
    // console.log(getSumJi(3))
    // console.log(getSumJi(4))
    // const obj1 = {
    //     name: "age",
    //     age: 10,
    //     bigDog: {
    //         bdname: "erha"
    //     },
    //     py: ["zs","ls"]
    // }
    // let deepCopy = function(value) {
    //     let obj = {};
    //     for(let key in value) {
    //         if(value[key].constructor === Object) {
    //             // obj[key] = {};
    //             obj[key] = deepCopy(value[key])
    //         } else if(value[key].constructor === Array) {
    //             obj[key] = deepCopy(value[key])
    //         }
    //          else {
    //             obj[key] = value[key]
    //         }
    //     }
    //     return obj
    // }
    // let obj2 = deepCopy(obj1);
    // obj2.bigDog.bdname = "1111"
    // obj2.py[0] = "1111"
    // console.log(obj2)
    // console.log(obj1)
    let arr = [
        {id: 6, pid: 2},
        {id: 2, pid: 1},
        {id: 3, pid: 1},
        {id: 4, pid: 1},
        {id: 5, pid: 1},
        {id: 1},
       
    ]
    function toTree(data) {
        // 删除 所有 children,以防止多次调用
        data.forEach(function (item) {
            delete item.children;
        });
        // 将数据存储为 以 id 为 KEY 的 map 索引数据列
        var map = {};
        data.forEach(function (item) {
            map[item.id] = item;
        });
        //console.log(map);
        var val = [];
        data.forEach(function (item) {
            // 以当前遍历项，的pid,去map对象中找到索引的id
            // parent相當於arr的每一项
            var parent = map[item.pid];
            // 好绕啊，如果找到索引，那么说明此项不在顶级当中,那么需要把此项添加到，他对应的父级中
            if (parent) {
                (parent.children || ( parent.children = [] )).push(item);
            } else {
                //如果没有在map中找到对应的索引ID,那么直接把 当前的item添加到 val结果集中，作为顶级
                val.push(item);
            }
        });
        return val;
    }
    // console.log(toTree(arr))

    let arrt = [
        {id: 1, name: "name1"},
        {id: 2, name: "name2",pid: 1}
    ]
    let map = {}
    arrt.forEach(item => {
        map[item.id] = item;
    })
    let arrn = [];
    arrn.push(arrt[0])
    let obj = map[1]
    obj.children = []
    console.log(arrn)
</script>